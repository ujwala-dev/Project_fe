<nav
  class="fixed top-0 left-0 w-full z-50 shadow-md flex items-center h-16 px-4 md:px-8"
  style="background-color: var(--blue-500); color: var(--blue-50)"
>
  <div class="flex items-center justify-between w-full max-w-7xl mx-auto">
    <!-- Logo -->
    <div class="text-2xl font-bold tracking-wide select-none">
      <a
        routerLink="/"
        class="hover:text-(--blue-200) transition-colors duration-200"
      >
        IdeaBoard
      </a>
    </div>

    <!-- Navigation Links -->
    <ul class="hidden md:flex items-center gap-8">
      <li *ngIf="isManager()">
        <a
          routerLink="/manager/dashboard"
          routerLinkActive="font-semibold text-white"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Dashboard</a
        >
      </li>
      <li *ngIf="isManager()">
        <a
          routerLink="/manager/decision"
          routerLinkActive="font-semibold text-white"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Decision</a
        >
      </li>

      <li *ngIf="isAdmin()">
        <a
          routerLink="/admin/dashboard"
          routerLinkActive="font-semibold text-white"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Dashboard</a
        >
      </li>
      <li *ngIf="isAdmin()">
        <a
          routerLink="/admin/categories"
          routerLinkActive="font-semibold text-white"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Categories</a
        >
      </li>
      <li *ngIf="isAdmin()">
        <a
          routerLink="/admin/manageusers"
          routerLinkActive="font-semibold text-white"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Manage Users</a
        >
      </li>
      <li *ngIf="isAdmin()">
        <a
          routerLink="/admin/reports"
          routerLinkActive="font-semibold text-white"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Reports</a
        >
      </li>

      <li *ngIf="isEmployee()">
        <a
          routerLink="/employee/dashboard"
          routerLinkActive="font-semibold text-white"
          [routerLinkActiveOptions]="{ exact: true }"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Dashboard</a
        >
      </li>
      <li *ngIf="isEmployee()">
        <a
          routerLink="/employee/createidea"
          routerLinkActive="font-semibold text-white"
          [routerLinkActiveOptions]="{ exact: true }"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Create Idea</a
        >
      </li>
      <li *ngIf="isEmployee()">
        <a
          routerLink="/employee/myideas"
          routerLinkActive="font-semibold text-white"
          [routerLinkActiveOptions]="{ exact: true }"
          class="text-(--blue-100) hover:text-white transition-colors"
          >My Ideas</a
        >
      </li>

      <!-- Fallback for generic roles -->
      <li *ngIf="!isEmployee() && !isManager() && !isAdmin()">
        <a
          routerLink="/employee/dashboard"
          routerLinkActive="font-semibold text-white"
          class="text-(--blue-100) hover:text-white transition-colors"
          >Dashboard</a
        >
      </li>
    </ul>

    <!-- User Profile / Login -->
    <div class="flex items-center gap-4">
      <!-- Notification Component (Only for Manager and Employee) -->
      <app-notification
        *ngIf="isLoggedIn() && (isManager() || isEmployee())"
      ></app-notification>

      <div
        class="relative"
        (click)="toggleDropdown()"
        data-dropdown-root
        *ngIf="isLoggedIn()"
      >
        <button
          type="button"
          class="relative group w-11 h-11 flex items-center justify-center rounded-full font-semibold text-sky-800 shadow-lg cursor-pointer select-none transition-all duration-150 bg-linear-to-br from-white via-sky-100 to-sky-200 ring-2 ring-white/80 ring-offset-2 ring-offset-(--blue-500) hover:scale-105 hover:shadow-[0_12px_40px_-12px_rgba(56,189,248,0.65)] focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-200"
          aria-haspopup="true"
          [attr.aria-expanded]="dropdownOpen()"
          [attr.title]="userName() || 'Profile'"
        >
          <span class="text-lg tracking-tight">{{ userInitial() }}</span>
          <span
            class="absolute inset-0 rounded-full bg-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-150"
            aria-hidden="true"
          ></span>
        </button>

        <!-- Dropdown Menu -->
        <div
          *ngIf="dropdownOpen()"
          class="absolute right-0 mt-3 w-64 rounded-2xl bg-white shadow-2xl border border-slate-100/80 py-2 text-slate-800 z-50 origin-top-right ring-1 ring-black/5 backdrop-blur-lg"
          role="menu"
          aria-label="Profile Menu"
        >
          <div class="px-4 py-3 border-b border-slate-100 bg-linear-to-br from-sky-50 via-white to-slate-50 rounded-t-2xl">
            <p class="text-[11px] font-semibold uppercase tracking-[0.14em] text-slate-500">
              Signed in as
            </p>
            <p class="text-sm font-semibold text-slate-900 mt-0.5 truncate">
              {{ userName() }}
            </p>
            <p class="text-xs font-medium text-slate-500">{{ userRole() }}</p>
          </div>

          <div class="px-4 pt-2 pb-3 border-t border-slate-100 bg-slate-50/60 rounded-b-2xl">
            <button
              class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-linear-to-r from-rose-500 to-amber-500 px-4 py-2.5 text-sm font-semibold text-white shadow-lg hover:brightness-105 transition"
              (click)="logout()"
              role="menuitem"
              type="button"
            >
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                <polyline points="16 17 21 12 16 7" />
                <line x1="21" y1="12" x2="9" y2="12" />
              </svg>
              Sign out
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="!isLoggedIn()">
        <a
          routerLink="/"
          class="px-5 py-2 rounded font-medium shadow-sm transition-all hover:shadow-md hover:bg-(--blue-200)"
          style="background-color: var(--blue-300); color: var(--blue-500)"
        >
          Login
        </a>
      </div>
    </div>
  </div>
</nav>

<!-- Logout success toast -->
<!-- <div
  *ngIf="successMessage()"
  class="fixed inset-x-0 bottom-6 z-50 flex justify-center px-4 pointer-events-none"
>
  <div class="bg-emerald-500 text-white px-4 py-3 rounded-lg shadow-lg text-sm font-medium pointer-events-auto">
    {{ successMessage() }}
  </div>
</div> -->

<router-outlet></router-outlet>
